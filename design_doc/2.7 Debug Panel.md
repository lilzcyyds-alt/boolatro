# 2.7 Debug Panel

## 概述 (Overview)

Debug Panel 是 Boolatro 的开发辅助工具，采用 Flutter Overlay 的形式叠加在 Flame 游戏引擎之上。它允许开发者在不修改代码的情况下，实时查看、修改游戏内部状态，并强制控制游戏流程。

## 技术方案 (Technical Implementation)

### 1. 混合层级管理 (Hybrid Layering)
Debug Panel 作为 Flutter Widget 实现，并通过 `GameWidget` 的 `overlayBuilderMap` 功能集成：

- **容器类型**: `StatelessWidget` / `ListenableBuilder`。
- **定位**: 使用 Flutter 的 `Positioned` 固定在屏幕 **右上角**。
- **通信**: 直接通过 `RunState` 进行双向绑定，实时监听状态变化并调用其内部方法（如 `advancePhase`）。

### 2. 界面布局 (UI Layout)
面板采用半透明深色背景，确保不影响底层游戏画面的可见性。

- **背景**: `Colors.black54`。
- **边框**: `Colors.white24`。
- **层级**: 高于所有 Flame `Component`，仅次于其它关键系统级 Overlay（如 `ProofEditor`）。

## 当前功能 (Current Features)

| 功能 | 描述 |
| :--- | :--- |
| **PHASE 显示** | 实时显示当前 `GamePhase` (如 START, SELECT_BLIND, PROOF, SHOP 等)。 |
| **ADVANCE** | 强制跳转到下一个游戏阶段。 |
| **RESET** | 重置 `RunState`，回到初始状态。 |
| **MONEY 查看** | 实时查看当前拥有的金钱数量。 |

## 使用建议 (Usage Guidelines)

1. **环境限制**: Debug Panel 默认在 `GameScreen` 中始终开启，供开发阶段快速测试。
2. **状态注入**: 所有调试逻辑必须通过 `RunState` 暴露，以保持逻辑的一致性，严禁在 UI 层直接篡改底层数据。

## 未来展望 (Future Roadmap)

- **作弊码集成**: 增加一键增加金钱、刷新商店、直接获得特定 Joker 等功能。
- **卡牌调整**: 运行时修改手牌中的逻辑项或算子。
- **开关控制**: 增加 `DebugPanel` 的全局开启/关闭开关，甚至在不同环境下自动隐藏。
