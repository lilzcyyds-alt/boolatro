# 3.1 Special Cards

本文件详细记录了游戏中已实现的特殊卡牌（Special Cards）及其效果逻辑。

## 特殊卡牌列表

### 1. Partner Card (搭档卡)
- **描述**: "When a valid proof is submitted, add bonus score."
- **触发时机**: `onProofSubmitted`
- **效果逻辑**: 
  - 检查证明是否有效 (`ctx.isValidProof`)。
  - 如果有效，返回一个包含额外分数的 `EffectPatch`。
- **实现文件**: `lib/boolatro/effects/cards/partner_card.dart`

### 2. Alchemy Card (炼金术卡)
- **描述**: "When an invalid proof is submitted, get a small fallback score."
- **触发时机**: `onProofSubmitted`
- **效果逻辑**: 
  - 检查证明是否无效 (`!ctx.isValidProof`)。
  - 如果无效，返回一个包含少量分数补偿的 `EffectPatch`。
- **实现文件**: `lib/boolatro/effects/cards/alchemy_card.dart`

### 3. Extra Hand Card (额外手牌卡)
- **描述**: "At the start of each round, gain an extra hand."
- **触发时机**: `onRoundStart`
- **效果逻辑**: 
  - 返回一个包含 `addHands: 1` 的 `EffectPatch`。
- **实现文件**: `lib/boolatro/effects/cards/extra_hand_card.dart`

## 如何添加新卡牌
1. 在 `lib/boolatro/effects/cards/` 下创建新的类，继承自 `SpecialCard`。
2. 重写 `onTrigger(EffectContext ctx)` 方法。
3. 根据 `ctx.trigger` 判断时机并返回 `EffectPatch`。
4. 在 `ShopState` 的初始化种子中加入新卡牌。
